name: Deploy with Telegram Notification

on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: üì• Checkout repo
        uses: actions/checkout@v3

      - name: ‚öôÔ∏è Build & Deploy
        run: |
          echo "üîß –ó–¥–µ—Å—å –±—É–¥–µ—Ç –¥–µ–ø–ª–æ–π..."
          # ./deploy.sh –∏–ª–∏ –ª—é–±–∞—è –¥—Ä—É–≥–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–µ–ø–ª–æ—è

      - name: ‚úÖ Send success Telegram notification
        if: success()
        run: |
          curl -s -X POST https://api.telegram.org/bot${{ secrets.TELEGRAM_DEPLOY_BOT_TOKEN }}/sendMessage \
            -d chat_id=${{ secrets.TELEGRAM_DEPLOY_CHAT_ID }} \
            -d parse_mode=Markdown \
            -d text="‚úÖ *–£—Å–ø–µ—à–Ω—ã–π –¥–µ–ø–ª–æ–π –ø—Ä–æ–µ–∫—Ç–∞ Tele‚Ä¢Ga!*\n–í–µ—Ç–∫–∞: \`main\`\n‚úÖ –í—Å—ë –ø—Ä–æ—à–ª–æ —É—Å–ø–µ—à–Ω–æ."

      - name: ‚ùå Send failure Telegram notification
        if: failure()
        run: |
          curl -s -X POST https://api.telegram.org/bot${{ secrets.TELEGRAM_DEPLOY_BOT_TOKEN }}/sendMessage \
            -d chat_id=${{ secrets.TELEGRAM_DEPLOY_CHAT_ID }} \
            -d parse_mode=Markdown \
            -d text="‚ùå *–û—à–∏–±–∫–∞ –¥–µ–ø–ª–æ—è –ø—Ä–æ–µ–∫—Ç–∞ Tele‚Ä¢Ga!*\n–í–µ—Ç–∫–∞: \`main\`\n–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ GitHub Actions." 